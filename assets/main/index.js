window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AdManager:[function(t,e){"use strict";cc._RF.push(e,"8d515YP+RtP2KXVOZDa0utO","AdManager"),cc.Class({extends:cc.Component,properties:{androidLink:{default:""},iosLink:{default:""},defaultLink:{default:""}},openAdUrl:function(){window.androidLink=this.androidLink,window.iosLink=this.iosLink,window.defaultLink=this.defaultLink,window.openAdUrl?window.openAdUrl():window.open()}}),cc._RF.pop()},{}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"934d3QUS1hFOIjCPakyv9Vg","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constant=o.ELEMENT=void 0,o.ELEMENT={ABYSS:"abyss",DARK:"dark",FIRE:"fire",LIGHT:"light",NATURE:"nature",WATER:"water"},o.Constant={EVENT:{ENEMY_DIE:"ENEMY_DIE",END_GAME:"END_GAME",CHANGE_SPEED:"CHANGE_SPEED",SPAWN_ENEMY:"SPAWN_ENEMY",COUNT_GEM:"COUNT_GEM"}},cc._RF.pop()},{}],GamePlay_2:[function(t,e,o){"use strict";cc._RF.push(e,"e2fa667DLlPRJKpvPLGbHib","GamePlay_2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=t("./JoyStick"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.enemy1Prefab=null,e.mainCamera=null,e.uiCamera=null,e.gemPrefab=null,e.popupSkill=null,e.joyStick=null,e.bg=null,e.endGameNode=null,e.textGuide=null,e.hand1=null,e.hand2=null,e.expBarNode=null,e.expBar=null,e.linkToStore=null,e.bgSound=null,e.clickSound=null,e.endGameSound=null,e.totalEnemy=0,e.countEnemyDie=0,e.countGem=0,e.isEndGame=!1,e.isPauseGame=!1,e.expCurrent=0,e.expLv1=5,e.heroComp=null,e.turnPopUp=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.makeResponsive(),cc.Canvas.instance.node.on(c.Constant.EVENT.ENEMY_DIE,this.enemyDie,this),cc.Canvas.instance.node.on(c.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(c.Constant.EVENT.SPAWN_ENEMY,this.spawnEnemy,this),cc.Canvas.instance.node.on(c.Constant.EVENT.COUNT_GEM,this.addGem,this),cc.audioEngine.play(this.bgSound,!0,.8)},e.prototype.start=function(){this.heroComp=this.hero.getComponent("kaboom"),this.hero.zIndex=3},e.prototype.update=function(){this.mainCamera.node.setPosition(this.hero.position.clampf(cc.v3(-520,-340),cc.v3(520,340)))},e.prototype.spawnEnemy=function(){var t=this;this.textGuide.active=!1,this.hand1.active=!1,this.spawnEnemyTurn1(),this.schedule(function(){t.spawnEnemyTurn1()},1,cc.macro.REPEAT_FOREVER,1)},e.prototype.spawnEnemyTurn1=function(){this.totalEnemy+=10;for(var t=0;t<10;t++){var e,o=Math.floor(-400*Math.random())+Math.floor(400*Math.random()),n=Math.floor(-550*Math.random())+Math.floor(550*Math.random()),i=Math.floor(2*Math.random())+1;e=t%2==0?this.hero.position.add(cc.v3(o+20*t,i%2==0?-550-10*t:550+10*t)):this.hero.position.add(cc.v3(i%2==0?-400-10*t:400+10*t,n+20*t)),this.createEnemy("enemy1",e).getComponent("enemy").run()}},e.prototype.enemyDie=function(t){if(this.countEnemyDie++,this.countGem++,2==this.countGem){this.countGem=0;var e=cc.instantiate(this.gemPrefab);e.setPosition(t),this.node.addChild(e)}},e.prototype.addGem=function(){var t=this;this.expBarNode.active=!0,this.expCurrent++,this.expCurrent>=this.expLv1&&(this.expCurrent=0,this.turnOnPopupSkill(),this.scheduleOnce(function(){t.expBar.fillRange=0},.25),10==this.expLv1&&(this.linkToStore.active=!0)),cc.tween(this.expBar).to(.1,{fillRange:this.expCurrent/this.expLv1}).start()},e.prototype.onEndGame=function(t){var e=this;cc.audioEngine.play(this.endGameSound,!1,.5),this.isEndGame=t,cc.tween(this.endGameNode).set({active:!0,scale:0}).to(.25,{scale:1}).call(function(){e.pauseAction(!0);var t=e.endGameNode.getChildByName("defeat").getComponent(sp.Skeleton);e.unscheduleAllCallbacks(),t.setCompleteListener(function(e){e.animation&&e.animation.name,"appear"==e.animation.name&&t.setAnimation(0,"idle",!0)})}).start()},e.prototype.turnOnPopupSkill=function(){var t=this;this.turnPopUp||(this.turnPopUp=!0,cc.audioEngine.play(this.endGameSound,!1,.5),cc.tween(this.popupSkill).set({active:!0,scale:0}).to(.25,{scale:1}).call(function(){t.expLv1=10,t.hand2.active=!0,t.popupSkill.getComponent(cc.Animation).play("hand2_guide"),t.pauseAction(!0),t.unscheduleAllCallbacks()}).start())},e.prototype.selectSkill=function(t,e){var o=this;switch(e){case"1":this.heroComp.skillIceArrow();break;case"2":this.heroComp.skillFireBall();break;case"3":this.heroComp.shootKnife()}this.turnPopUp=!1,cc.audioEngine.play(this.clickSound,!1,2),this.hand2.active=!1,cc.tween(this.popupSkill).to(.25,{scale:0}).call(function(){o.popupSkill.getChildByName("listCard").children.forEach(function(t,e){t.active=!(e<3)}),o.pauseAction(!1),o.schedule(function(){o.spawnEnemyTurn1()},1,cc.macro.REPEAT_FOREVER,0)}).start()},e.prototype.pauseAction=function(t){this.heroComp.bodyCollider.enabled=!t,this.heroComp.rangeCollider.enabled=!t,this.hero.getChildByName("skill1").active=!t,this.isPauseGame=t,t&&(this.joyStick.getComponent(a.default).touchEndEvent(),this.heroComp.unscheduleAllCallbacks()),this.joyStick.active=!t},e.prototype.createEnemy=function(t,e){var o=null;switch(t){case"enemy1":o=cc.instantiate(this.enemy1Prefab)}return this.node.addChild(o),o.setPosition(e),o},e.prototype.makeResponsive=function(){var t=this.node.getComponent(cc.Canvas),e=cc.view.getFrameSize(),o=t.designResolution.width/t.designResolution.height,n=e.width/e.height;n>=o?(t.fitHeight=!0,t.fitWidth=!1):n<o&&(t.fitHeight=!1,t.fitWidth=!0)},r([p(cc.Node)],e.prototype,"hero",void 0),r([p(cc.Prefab)],e.prototype,"enemy1Prefab",void 0),r([p(cc.Camera)],e.prototype,"mainCamera",void 0),r([p(cc.Camera)],e.prototype,"uiCamera",void 0),r([p(cc.Prefab)],e.prototype,"gemPrefab",void 0),r([p(cc.Node)],e.prototype,"popupSkill",void 0),r([p(cc.Node)],e.prototype,"joyStick",void 0),r([p(cc.Node)],e.prototype,"bg",void 0),r([p(cc.Node)],e.prototype,"endGameNode",void 0),r([p(cc.Node)],e.prototype,"textGuide",void 0),r([p(cc.Node)],e.prototype,"hand1",void 0),r([p(cc.Node)],e.prototype,"hand2",void 0),r([p(cc.Node)],e.prototype,"expBarNode",void 0),r([p(cc.Sprite)],e.prototype,"expBar",void 0),r([p(cc.Node)],e.prototype,"linkToStore",void 0),r([p(cc.AudioClip)],e.prototype,"bgSound",void 0),r([p(cc.AudioClip)],e.prototype,"clickSound",void 0),r([p(cc.AudioClip)],e.prototype,"endGameSound",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant":"Constant","./JoyStick":"JoyStick"}],JoyStick:[function(t,e,o){"use strict";cc._RF.push(e,"4e138tFidRDnLPhU89XWAAw","JoyStick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.ring=null,e.radius=null,e.stickPos=null,e.touchLocation=null,e.gamePlay=null,e.offGuide=!1,e}return i(e,t),e.prototype.start=function(){this.radius=this.ring.width/2,this.initTouchEvent(),this.gamePlay=cc.Canvas.instance.node.getComponent("gamePlay")},e.prototype.initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},e.prototype.touchStartEvent=function(t){this.offGuide||(this.offGuide=!0,cc.Canvas.instance.node.emit(c.Constant.EVENT.SPAWN_ENEMY));var e=this.node.convertToNodeSpaceAR(t.getLocation());this.stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition().mag());this.radius>o&&this.dot.setPosition(e),this.gamePlay.heroComp.directionX=this.dot.x>0?-1:1,this.gamePlay.heroComp.run(),this.stickPos=e,this.node.opacity=255,this.touchLocation=t.getLocation(),this.ring.setPosition(e),this.dot.setPosition(e)},e.prototype.touchMoveEvent=function(t){if(this.touchLocation===t.getLocation())return!1;var e=this.ring.convertToNodeSpaceAR(t.getLocation()),o=e.mag(),n=this.stickPos.x+e.x,i=this.stickPos.y+e.y,r=cc.v2(n,i).sub(this.ring.getPosition()).normalize();if(this.radius>o)this.dot.setPosition(cc.v2(n,i));else{var c=this.stickPos.x+r.x*this.radius,a=this.stickPos.y+r.y*this.radius;this.dot.setPosition(cc.v2(c,a))}this.gamePlay.heroComp.run(),this.gamePlay.heroComp.moveDir=r,this.gamePlay.heroComp.directionX=this.dot.x>0?-1:1},e.prototype.touchEndEvent=function(){this.dot.setPosition(this.ring.getPosition()),this.node.opacity=0,this.gamePlay.heroComp.stop()},e.prototype.update=function(){},r([l(cc.Node)],e.prototype,"dot",void 0),r([l(cc.Node)],e.prototype,"ring",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],PlatformBrandIcon:[function(t,e,o){"use strict";cc._RF.push(e,"5c2b0Hn/WBGxbjDSZRcovbN","PlatformBrandIcon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.androidIcon=null,e.iosIcon=null,e}return i(e,t),e.prototype.start=function(){cc.sys.os==cc.sys.OS_ANDROID?this.getComponent(cc.Sprite).spriteFrame=this.androidIcon:cc.sys.os==cc.sys.OS_IOS&&(this.getComponent(cc.Sprite).spriteFrame=this.iosIcon)},r([s(cc.SpriteFrame)],e.prototype,"androidIcon",void 0),r([s(cc.SpriteFrame)],e.prototype,"iosIcon",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],bulletHeroListener:[function(t,e,o){"use strict";cc._RF.push(e,"6a615KUuTxNLpC2TMRDkDVV","bulletHeroListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./bullet"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletNode=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){var o=cc.Canvas.instance.node.getComponent("gamePlay").heroComp;if(t.node.getComponent("enemyListener")&&e.node.getComponent("bulletHeroListener")){var n=t.node.getComponent("enemyListener").target,i=this.bulletNode.getComponent(c.default);n.getComponent("enemy").attacked(i.damage),i.isShuriken||(this.scheduleOnce(function(){e.node.getChildByName("explode")&&(e.node.getComponent(cc.Collider).enabled=!1,e.node.stopAllActions(),e.node.getChildByName("explode").active=!0,e.node.getChildByName("trail1").active=!1,e.node.getChildByName("icon").active=!1)},.01),this.scheduleOnce(function(){e.node.destroy()},.12)),i.isKnife&&o.skillKnife(e.node.position),i.isArrow&&n.getComponent("enemy").freeze()}},r([l(cc.Node)],e.prototype,"bulletNode",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./bullet":"bullet"}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"ba7cfCUQlNCEIFcMs27Q2UM","bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damage=0,e.isKnife=!1,e.isArrow=!1,e.isShuriken=!1,e}return i(e,t),e.prototype.start=function(){},r([s(cc.Integer)],e.prototype,"damage",void 0),r([s(cc.Boolean)],e.prototype,"isKnife",void 0),r([s(cc.Boolean)],e.prototype,"isArrow",void 0),r([s(cc.Boolean)],e.prototype,"isShuriken",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],effect:[function(t,e,o){"use strict";cc._RF.push(e,"509bd1PIO9OhrLmNb930bKd","effect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.collider=null,e.gamePlay=null,e.type=null,e}return i(e,t),e.prototype.start=function(){this.gamePlay=cc.Canvas.instance.node.getComponent("game")},e.prototype.setAnim=function(){},e.prototype.finish=function(){this.node.destroy()},e.prototype.offCollider=function(){this.collider.enabled=!1},e.prototype.play=function(t,e){switch(void 0===e&&(e=cc.v3(0,0)),t){case"moon_aura":this.getAnim(t).speed=.4,this.node.position=e,this.node.scale=2;break;case"skill_1_boss":this.getAnim(t).speed=.3,this.node.position=e;break;case"skill1_fx":this.getAnim(t).speed=.5,this.node.angle=90,this.node.position=e;break;case"flame_2":this.getAnim(t).speed=.7,this.node.scale=.7,this.node.position=e;break;case"flame_3":this.getAnim(t).speed=.5,this.node.scale=.3,this.node.position=e}this.anim.play(t)},e.prototype.getAnim=function(t){for(var e=0;e<this.anim.getClips().length;e++)if(this.anim.getClips()[e].name==t)return this.anim.getClips()[e];return null},r([s(cc.Animation)],e.prototype,"anim",void 0),r([s(cc.CircleCollider)],e.prototype,"collider",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],enemyListener:[function(t,e,o){"use strict";cc._RF.push(e,"34607e8qldE4p0kUXlNOEAT","enemyListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){e.node.getComponent("enemyListener")&&t.node.getComponent("heroListener")&&e.node.getComponent("enemyListener").target.getComponent("enemy").attack(t.node)},e.prototype.onCollisionExit=function(t,e){e.node.getComponent("enemyListener")&&t.node.getComponent("heroListener")&&e.node.getComponent("enemyListener").target.getComponent("enemy").exitTarget()},r([s(cc.Node)],e.prototype,"target",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"ee894rLZOtG451paY6xID8B","enemy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bodySkeleton=null,e.bodyCollider=null,e.bodyPhysicsCollider=null,e.blood=null,e.bloodPrefab=null,e.timeSpeed=0,e.hp=0,e.damage=0,e.isMeet=!1,e.isDie=!1,e.isFreeze=!1,e.maxHp=0,e.gamePlay=null,e}return i(e,t),e.prototype.start=function(){this.gamePlay=cc.Canvas.instance.node.getComponent("gamePlay"),this.node.zIndex=2,this.maxHp=this.hp},e.prototype.run=function(){},e.prototype.attacked=function(t){this.isDie||(this.hp-=t,this.showBlood(t),this.hp<=0&&(this.hp=0,this.bodyCollider.enabled=!1,this.isDie=!0,this.node.stopAllActions(),this.unscheduleAllCallbacks(),cc.Canvas.instance.node.emit(c.Constant.EVENT.ENEMY_DIE,this.node.position),this.node.destroy()),this.blood.fillRange=this.hp/this.maxHp)},e.prototype.attack=function(t){var e=this;this.isMeet=!0;var o=t.getComponent("hero");o.attacked(this.damage),this.bodySkeleton.schedule(function(){e.isMeet&&o.attacked(e.damage)},1,cc.macro.REPEAT_FOREVER,.5)},e.prototype.exitTarget=function(){this.isMeet=!1,this.bodySkeleton.unscheduleAllCallbacks()},e.prototype.freeze=function(){var t=this;this.isFreeze=!0,this.bodySkeleton.paused=!0,this.node.getChildByName("snow").active=!0,this.bodyPhysicsCollider.enabled=!1,this.node.zIndex=1,this.scheduleOnce(function(){t.isFreeze=!1,t.bodySkeleton.paused=!1,t.bodyPhysicsCollider.enabled=!0,t.node.getChildByName("snow").active=!1,t.node.zIndex=2},2)},e.prototype.onPause=function(t){this.isFreeze||(this.bodySkeleton.paused=t),this.bodyCollider.enabled=!t,this.bodySkeleton.unscheduleAllCallbacks()},e.prototype.showBlood=function(t){if(0!=t){var e=cc.tween,o=cc.instantiate(this.bloodPrefab);this.node.parent.addChild(o,3),String(t).slice(0,1);var n=t+Math.floor(10*Math.random()+10);o.getComponent(cc.Label).string="-"+String(n),o.position=this.node.position.add(cc.v3(0,0)),t>70?(o.scale=.2,o.color=cc.Color.RED,o.getComponent(cc.Label).enableBold=!0,o.getComponent(cc.LabelOutline).color=cc.color(0,0,0),o.getComponent(cc.LabelOutline).width=2,e(o).by(.25,{y:50,scale:-.1}).call(function(){o.destroy()}).start()):e(o).by(.3,{y:50}).call(function(){o.destroy()}).start()}},e.prototype.update=function(t){if(!this.isFreeze&&!this.gamePlay.isPauseGame){var e=cc.Canvas.instance.node.getChildByName("hero");this.node.scaleX=this.node.x<=e.x+10?-1:1,Math.sqrt(Math.pow(this.node.x-e.x,2)+Math.pow(this.node.y-e.y,2)),this.node.x=this.node.x+t*(this.node.x<e.x?1:-1)*(10*Math.abs(this.node.x-e.x)/this.timeSpeed),this.node.y=this.node.y+t*(this.node.y<e.y?1:-1)*(10*Math.abs(this.node.y-e.y)/this.timeSpeed)}this.gamePlay.isPauseGame&&this.onPause(!0),this.gamePlay.isPauseGame||this.onPause(!1)},r([l(sp.Skeleton)],e.prototype,"bodySkeleton",void 0),r([l(cc.CircleCollider)],e.prototype,"bodyCollider",void 0),r([l(cc.PhysicsCircleCollider)],e.prototype,"bodyPhysicsCollider",void 0),r([l(cc.Sprite)],e.prototype,"blood",void 0),r([l(cc.Prefab)],e.prototype,"bloodPrefab",void 0),r([l(cc.Integer)],e.prototype,"timeSpeed",void 0),r([l(cc.Integer)],e.prototype,"hp",void 0),r([l(cc.Integer)],e.prototype,"damage",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],gamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"ef1d6tt/RtJXI44W2k4YByY","gamePlay");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=t("./JoyStick"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.enemy1Prefab=null,e.mainCamera=null,e.uiCamera=null,e.gemPrefab=null,e.popupSkill=null,e.joyStick=null,e.bg=null,e.endGameNode=null,e.textGuide=null,e.hand1=null,e.hand2=null,e.expBarNode=null,e.expBar=null,e.linkToStore=null,e.bgSound=null,e.clickSound=null,e.endGameSound=null,e.eatGemSound=null,e.totalEnemy=0,e.countEnemyDie=0,e.countGem=0,e.isEndGame=!1,e.isPauseGame=!1,e.expCurrent=0,e.expLv1=5,e.heroComp=null,e.turnPopUp=!1,e.checkUpgrade=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.makeResponsive(),cc.Canvas.instance.node.on(c.Constant.EVENT.ENEMY_DIE,this.enemyDie,this),cc.Canvas.instance.node.on(c.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(c.Constant.EVENT.SPAWN_ENEMY,this.spawnEnemy,this),cc.Canvas.instance.node.on(c.Constant.EVENT.COUNT_GEM,this.addGem,this),cc.audioEngine.play(this.bgSound,!0,.8)},e.prototype.start=function(){this.heroComp=this.hero.getComponent("hero"),this.hero.zIndex=3},e.prototype.update=function(){this.mainCamera.node.setPosition(this.hero.position.clampf(cc.v3(-520,-340),cc.v3(520,340)))},e.prototype.spawnEnemy=function(){var t=this;this.textGuide.active=!1,this.hand1.active=!1,this.spawnEnemyTurn1(),this.schedule(function(){t.spawnEnemyTurn1()},5,cc.macro.REPEAT_FOREVER,1)},e.prototype.spawnEnemyTurn1=function(){this.totalEnemy+=10;for(var t=0;t<10;t++){var e,o=Math.floor(-400*Math.random())+Math.floor(400*Math.random()),n=Math.floor(-550*Math.random())+Math.floor(550*Math.random()),i=Math.floor(2*Math.random())+1;e=t%2==0?this.hero.position.add(cc.v3(o+20*t,i%2==0?-550-10*t:550+10*t)):this.hero.position.add(cc.v3(i%2==0?-400-10*t:400+10*t,n+20*t)),this.createEnemy("enemy1",e).getComponent("enemy").run()}},e.prototype.enemyDie=function(t){if(this.countEnemyDie++,this.countGem++,3==this.countGem){this.countGem=0;var e=cc.instantiate(this.gemPrefab);e.setPosition(t),this.node.addChild(e)}},e.prototype.addGem=function(){var t=this;this.expBarNode.active=!0,this.expCurrent++,this.heroComp.eatGem(),cc.audioEngine.play(this.eatGemSound,!1,1),this.expCurrent>=this.expLv1&&(this.expCurrent=0,this.turnOnPopupSkill(),this.scheduleOnce(function(){t.expBar.fillRange=0},.25),15==this.expLv1&&(this.linkToStore.active=!0)),cc.tween(this.expBar).to(.1,{fillRange:this.expCurrent/this.expLv1}).start()},e.prototype.onEndGame=function(t){var e=this;cc.audioEngine.play(this.endGameSound,!1,.5),this.isEndGame=t,cc.tween(this.endGameNode).set({active:!0,scale:0}).to(.25,{scale:1}).call(function(){e.pauseAction(!0);var t=e.endGameNode.getChildByName("defeat").getComponent(sp.Skeleton);e.unscheduleAllCallbacks(),t.setCompleteListener(function(e){e.animation&&e.animation.name,"appear"==e.animation.name&&t.setAnimation(0,"idle",!0)})}).start()},e.prototype.turnOnPopupSkill=function(){var t=this;this.turnPopUp||(this.turnPopUp=!0,cc.audioEngine.play(this.endGameSound,!1,.5),cc.tween(this.popupSkill).set({active:!0,scale:0}).to(.25,{scale:1}).call(function(){t.expLv1=15,t.hand2.active=!0,t.popupSkill.getComponent(cc.Animation).play("hand2_guide"),t.pauseAction(!0),t.unscheduleAllCallbacks()}).start())},e.prototype.selectSkill=function(t,e){var o=this;if(!this.checkUpgrade){switch(this.checkUpgrade=!0,e){case"1":this.heroComp.skillHolyRing();break;case"2":this.heroComp.skillKame();break;case"3":this.heroComp.skillBallElectric()}this.turnPopUp=!1,cc.audioEngine.play(this.clickSound,!1,2),this.hand2.active=!1,cc.tween(this.popupSkill).to(.25,{scale:0}).call(function(){o.popupSkill.getChildByName("listCard").children.forEach(function(t,e){t.active=!(e<3)}),o.pauseAction(!1),o.schedule(function(){o.spawnEnemyTurn1()},1,cc.macro.REPEAT_FOREVER,0)}).start()}},e.prototype.pauseAction=function(t){this.heroComp.bodyCollider.enabled=!t,this.heroComp.rangeCollider.enabled=!t,this.heroComp.skillAroundArr.forEach(function(e){e.active=!t}),this.isPauseGame=t,t&&(this.joyStick.getComponent(a.default).touchEndEvent(),this.heroComp.unscheduleAllCallbacks()),this.joyStick.active=!t},e.prototype.createEnemy=function(t,e){var o=null;switch(t){case"enemy1":o=cc.instantiate(this.enemy1Prefab)}return this.node.addChild(o),o.setPosition(e),o},e.prototype.makeResponsive=function(){var t=this.node.getComponent(cc.Canvas),e=cc.view.getFrameSize(),o=t.designResolution.width/t.designResolution.height,n=e.width/e.height;n>=o?(t.fitHeight=!0,t.fitWidth=!1):n<o&&(t.fitHeight=!1,t.fitWidth=!0)},r([p(cc.Node)],e.prototype,"hero",void 0),r([p(cc.Prefab)],e.prototype,"enemy1Prefab",void 0),r([p(cc.Camera)],e.prototype,"mainCamera",void 0),r([p(cc.Camera)],e.prototype,"uiCamera",void 0),r([p(cc.Prefab)],e.prototype,"gemPrefab",void 0),r([p(cc.Node)],e.prototype,"popupSkill",void 0),r([p(cc.Node)],e.prototype,"joyStick",void 0),r([p(cc.Node)],e.prototype,"bg",void 0),r([p(cc.Node)],e.prototype,"endGameNode",void 0),r([p(cc.Node)],e.prototype,"textGuide",void 0),r([p(cc.Node)],e.prototype,"hand1",void 0),r([p(cc.Node)],e.prototype,"hand2",void 0),r([p(cc.Node)],e.prototype,"expBarNode",void 0),r([p(cc.Sprite)],e.prototype,"expBar",void 0),r([p(cc.Node)],e.prototype,"linkToStore",void 0),r([p(cc.AudioClip)],e.prototype,"bgSound",void 0),r([p(cc.AudioClip)],e.prototype,"clickSound",void 0),r([p(cc.AudioClip)],e.prototype,"endGameSound",void 0),r([p(cc.AudioClip)],e.prototype,"eatGemSound",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant":"Constant","./JoyStick":"JoyStick"}],gem:[function(t,e,o){"use strict";cc._RF.push(e,"559a6ZW3eZKToGTx2ExzOXS","gem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gamePlay=null,e.heroPos=null,e}return i(e,t),e.prototype.start=function(){this.gamePlay=cc.Canvas.instance.node.getComponent("gamePlay")},e.prototype.moveToHero=function(){var t=this;this.heroPos=this.gamePlay.hero.position;var e=Math.abs(this.heroPos.x-this.node.x);cc.tween(this.node).to(e/1e3,{position:this.heroPos}).call(function(){t.moveToHero()}).start()},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],heroListener:[function(t,e,o){"use strict";cc._RF.push(e,"2910fuy6ihCOLc2U3/6jdtv","heroListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){e.node.getComponent("heroListener")&&"gem"==t.node.name&&(t.node.destroy(),cc.Canvas.instance.node.emit(c.Constant.EVENT.COUNT_GEM))},r([l(cc.Node)],e.prototype,"target",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],hero:[function(t,e,o){"use strict";cc._RF.push(e,"7dca7QRyN9LfKFIkDZl5K0r","hero");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bodySkeleton=null,e.effGem=null,e.bodyCollider=null,e.rangeCollider=null,e.heroBullet=null,e.heroShurikenPrefab=null,e.heroSkillKame=null,e.heroKnife=null,e.heroArrow=null,e.heroSkillFlame=null,e.heroSkillBallElectric=null,e.heroSkillHolyRing=null,e.fireBall=null,e.blood=null,e.hp=500,e.damage=50,e.flyMove=!1,e.atkSound=null,e.moveDir=null,e.directionX=null,e.isRun=!1,e.isDie=!1,e.speed=250,e.maxHp=0,e.enemyArr=[],e.skillAroundArr=[],e.isAttack=!1,e.gamePlay=null,e}return i(e,t),e.prototype.start=function(){this.maxHp=this.hp,this.gamePlay=cc.Canvas.instance.node.getComponent("gamePlay"),this.bodySkeleton.node.zIndex=8,this.effGem.node.zIndex=9,this.skillShuriken()},e.prototype.run=function(){this.isRun||this.isDie||(this.isRun=!0,this.bodySkeleton.setAnimation(0,this.flyMove?"fly":"move",!0))},e.prototype.idle=function(){this.isRun||this.isDie||this.bodySkeleton.setAnimation(0,this.flyMove?"fly idle":"idle",!0)},e.prototype.stop=function(){this.isDie||(this.isRun=!1,this.bodySkeleton.setAnimation(0,this.flyMove?"fly idle":"idle",!0))},e.prototype.attack=function(){var t=this;this.enemyArr.length>0&&(this.isAttack||(this.isAttack=!0,this.bodySkeleton.schedule(function(){t.shoot()},.35,cc.macro.REPEAT_FOREVER,0)))},e.prototype.eatGem=function(){this.effGem.setAnimation(0,"charge-2",!1)},e.prototype.attacked=function(t){this.isDie||(this.hp-=t,this.hp<=0&&(this.hp=0,this.bodyCollider.enabled=!1,this.isDie=!0,this.node.stopAllActions(),this.node.getChildByName("skill1").active=!1,this.bodySkeleton.setAnimation(0,"die",!1),this.unscheduleAllCallbacks(),this.bodySkeleton.unscheduleAllCallbacks(),this.changeAnimation(),this.gamePlay.joyStick.getComponent("Joystick").touchEndEvent(),this.gamePlay.joyStick.active=!1),this.blood.fillRange=this.hp/this.maxHp)},e.prototype.removeEnemy=function(t){var e=this;this.enemyArr.forEach(function(o,n){o._id==t&&e.enemyArr.splice(n,1)}),0==this.enemyArr.length&&this.idle()},e.prototype.shoot=function(){for(var t=0;t<1;t++)if(this.enemyArr.length>0&&this.enemyArr[0]){cc.audioEngine.play(this.atkSound,!1,.5);var e=cc.instantiate(this.heroBullet),o=this.enemyArr[0].position.add(cc.v3(50*t,50*t)),n=(this.bodySkeleton.node.scaleX,this.node.position.add(cc.v3(0,30))),i=this.checkAngle(n,this.enemyArr[0]);this.createBullet(e,i,n,o)}},e.prototype.skillFireBall=function(){var t=this;this.schedule(function(){for(var e=0;e<1;e++)if(t.enemyArr.length>1){var o=cc.instantiate(t.fireBall);o.zIndex=5,o.scaleX=t.enemyArr[1].position.x<0?.1:-.1;var n=t.enemyArr[1].position,i=t.enemyArr[1].position.add(cc.v3(t.enemyArr[1].position.x<0?500:-500,(t.enemyArr[1].position.y,500)));t.createBullet(o,0,i,n,.75)}},.4,cc.macro.REPEAT_FOREVER,0)},e.prototype.skillFlame=function(){var t=this;this.schedule(function(){var e=t.createSkillCircle(t.heroSkillFlame,t.node.parent,t.node.position.add(cc.v3(0,50)),2.5);e.getComponent(cc.CircleCollider).enabled=!0,e.getChildByName("icon").getComponent(cc.Animation).play("flame_2")},1,cc.macro.REPEAT_FOREVER,1)},e.prototype.skillHolyRing=function(){var t=this.createSkillCircle(this.heroSkillHolyRing,this.node,cc.v3(0,20),.4);this.skillAroundArr.push(t)},e.prototype.skillShuriken=function(){var t=this.createSkillCircle(this.heroShurikenPrefab,this.node,cc.v3(0,20),1.3);t.zIndex=2,this.skillAroundArr.push(t)},e.prototype.skillBallElectric=function(){var t=this;this.schedule(function(){for(var e=function(e){var o=e%2==0?Math.floor(-400*Math.random()):Math.floor(400*Math.random()),n=e%2==0?Math.floor(-450*Math.random()):Math.floor(450*Math.random()),i=t.node.position.add(cc.v3(o,n)),r=t.createSkillCircle(t.heroSkillBallElectric,t.node.parent,i,1.2),c=r.getChildByName("icon").getComponent(sp.Skeleton),a=r.getChildByName("colliderCircle");c.setCompleteListener(function(t){"eff_skill_black_hole_start"==(t.animation?t.animation.name:"")&&(a.children.forEach(function(t){t.getComponent(cc.CircleCollider).enabled=!0}),c.setAnimation(0,"eff_skill_black_hole_middle",!0),cc.tween(r).delay(1.5).to(.2,{scale:0}).call(function(){r.destroy()}).start())})},o=0;o<4;o++)e(o)},3,cc.macro.REPEAT_FOREVER,1)},e.prototype.skillKame=function(){var t=this,e=this.createSkillCircle(this.heroSkillKame,this.node,cc.v3(0,0),1);this.schedule(function(){if(t.enemyArr.length>0&&t.enemyArr[0]){var o=t.checkAngle(t.node.position,t.enemyArr[0]);cc.tween(e).to(.75,{angle:o}).start()}else e.stopAllActions()},1,cc.macro.REPEAT_FOREVER,0)},e.prototype.shootKnife=function(){var t=this;this.bodySkeleton.schedule(function(){for(var e=0;e<1;e++)if(t.enemyArr.length>1){var o=cc.instantiate(t.heroKnife),n=t.enemyArr[1].position.add(cc.v3(50*e,50*e)),i=(t.bodySkeleton.node.scaleX,t.node.position.add(cc.v3(0,30))),r=t.checkAngle(i,t.enemyArr[1]);t.createBullet(o,r,i,n,.35)}},.25,cc.macro.REPEAT_FOREVER,.5)},e.prototype.skillKnife=function(t){for(var e=function(e){var n=cc.instantiate(o.heroKnife),i=90*e-135,r=i*Math.PI/180;n.getComponent("bullet").isKnife=!1,n.getComponent(cc.CircleCollider).enabled=!1;var c=n.scaleX<0?-1e3:1e3,a=t.add(cc.v3(c*Math.cos(r),c*Math.sin(r)));o.scheduleOnce(function(){n.getComponent(cc.CircleCollider).enabled=!0},.15),o.createBullet(n,i,t,a,1)},o=this,n=0;n<4;n++)e(n)},e.prototype.skillIceArrow=function(){var t=this;this.schedule(function(){for(var e=0;e<10;e++){var o=cc.instantiate(t.heroArrow),n=-Math.PI+Math.PI*e/5,i=t.node.position.add(cc.v3(0,30)),r=180*n/Math.PI,c=o.scaleX<0?-1e3:1e3,a=i.add(cc.v3(c*Math.cos(n),c*Math.sin(n)));t.createBullet(o,r,i,a,1)}},1,cc.macro.REPEAT_FOREVER,1)},e.prototype.createBullet=function(t,e,o,n,i){var r=this;void 0===i&&(i=.25),this.node.parent.addChild(t),t.angle=e,t.setPosition(o),this.bodySkeleton.node.scaleX,this.scheduleOnce(function(){t.getChildByName("trail1").active=!0},.05),cc.tween(t).to(i,{position:n}).call(function(){t.getChildByName("explode").active=!0,t.getChildByName("icon").active=!1,r.scheduleOnce(function(){t.destroy()},.12)}).start()},e.prototype.createSkillCircle=function(t,e,o,n){void 0===o&&(o=cc.v3(0,0)),void 0===n&&(n=1);var i=cc.instantiate(t);return e.addChild(i),i.position=o,i.scale=n,i},e.prototype.checkAngle=function(t,e){if(e){var o=e,n=o.x-t.x!=0?(o.y-t.y)/(o.x-t.x):0,i=Math.atan(n)*(180/Math.PI);return t.x<=o.x?i:i+180}},e.prototype.changeAnimation=function(){var t=this;this.bodySkeleton.setCompleteListener(function(e){"die"==(e.animation?e.animation.name:"")&&(t.node.active=!1,cc.Canvas.instance.node.emit(c.Constant.EVENT.END_GAME,!1))})},e.prototype.update=function(){if(this.moveDir&&this.directionX&&this.isRun&&!this.isDie){var t=this.node.position.add(this.moveDir.mul(this.speed/60));this.node.setPosition(t.clampf(cc.v3(-700,-750),cc.v3(700,750)))}this.enemyArr.length>0&&this.enemyArr[0]&&!this.isDie&&(this.enemyArr[0].x>=this.node.x+20?this.bodySkeleton.node.scaleX=-.1:this.bodySkeleton.node.scaleX=.1)},r([l(sp.Skeleton)],e.prototype,"bodySkeleton",void 0),r([l(sp.Skeleton)],e.prototype,"effGem",void 0),r([l(cc.CircleCollider)],e.prototype,"bodyCollider",void 0),r([l(cc.CircleCollider)],e.prototype,"rangeCollider",void 0),r([l(cc.Prefab)],e.prototype,"heroBullet",void 0),r([l(cc.Prefab)],e.prototype,"heroShurikenPrefab",void 0),r([l(cc.Prefab)],e.prototype,"heroSkillKame",void 0),r([l(cc.Prefab)],e.prototype,"heroKnife",void 0),r([l(cc.Prefab)],e.prototype,"heroArrow",void 0),r([l(cc.Prefab)],e.prototype,"heroSkillFlame",void 0),r([l(cc.Prefab)],e.prototype,"heroSkillBallElectric",void 0),r([l(cc.Prefab)],e.prototype,"heroSkillHolyRing",void 0),r([l(cc.Prefab)],e.prototype,"fireBall",void 0),r([l(cc.Sprite)],e.prototype,"blood",void 0),r([l(cc.Integer)],e.prototype,"hp",void 0),r([l(cc.Integer)],e.prototype,"damage",void 0),r([l(cc.Boolean)],e.prototype,"flyMove",void 0),r([l(cc.AudioClip)],e.prototype,"atkSound",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],kaboom:[function(t,e,o){"use strict";cc._RF.push(e,"5cf1bFirdpNe6szzD0hTpXk","kaboom");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Constant"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bodySkeleton=null,e.bodyCollider=null,e.rangeCollider=null,e.heroBullet=null,e.effect=null,e.kameBeam=null,e.blood=null,e.hp=500,e.damage=50,e.atkSound=null,e.moveDir=null,e.directionX=null,e.isRun=!1,e.isDie=!1,e.speed=250,e.maxHp=0,e.enemyArr=[],e.isAttack=!1,e.gamePlay=null,e}return i(e,t),e.prototype.start=function(){this.maxHp=this.hp,this.gamePlay=cc.Canvas.instance.node.getComponent("GamePlay")},e.prototype.run=function(){this.isRun||this.isDie||(this.isRun=!0,this.bodySkeleton.setAnimation(0,"fly",!0),this.kameBeam.active=!0)},e.prototype.idle=function(){this.isRun||this.isDie||(this.bodySkeleton.setAnimation(0,"fly idle",!0),this.kameBeam.active=!1)},e.prototype.stop=function(){this.isDie||(this.isRun=!1,this.bodySkeleton.setAnimation(0,"idle",!0),this.kameBeam.active=!1)},e.prototype.attack=function(){var t=this;this.enemyArr.length>0&&(this.isAttack||(this.isAttack=!0,this.bodySkeleton.schedule(function(){t.Flame()},2,cc.macro.REPEAT_FOREVER,0)))},e.prototype.attacked=function(t){this.isDie||(this.hp-=t,this.hp<=0&&(this.hp=0,this.bodyCollider.enabled=!1,this.isDie=!0,this.node.stopAllActions(),this.node.getChildByName("holyRing").active=!1,this.bodySkeleton.setAnimation(0,"die",!1),this.unscheduleAllCallbacks(),this.bodySkeleton.unscheduleAllCallbacks(),this.changeAnimation(),this.gamePlay.joyStick.getComponent("Joystick").touchEndEvent(),this.gamePlay.joyStick.active=!1),this.blood.fillRange=this.hp/this.maxHp)},e.prototype.removeEnemy=function(t){var e=this;this.enemyArr.forEach(function(o,n){o._id==t&&e.enemyArr.splice(n,1)}),0==this.enemyArr.length&&this.idle()},e.prototype.Flame=function(){if(this.showEffect("flame_2",this.node),this.enemyArr.length>0)for(var t=0;t<this.enemyArr.length;t++)cc.audioEngine.play(this.atkSound,!1,.5),this.showEffect("flame_3",this.enemyArr[t])},e.prototype.showEffect=function(t,e){var o=cc.instantiate(this.effect);return e.addChild(o),o.getComponent("effect").play(t),o.zIndex=100,o},e.prototype.createBullet=function(t,e,o,n,i){var r=this;void 0===i&&(i=.25),this.node.parent.addChild(t),t.angle=e,t.setPosition(o),this.bodySkeleton.node.scaleX,this.scheduleOnce(function(){t.getChildByName("trail1").active=!0},.05),cc.tween(t).to(i,{position:n}).call(function(){t.getChildByName("explode").active=!0,t.getChildByName("icon").active=!1,r.scheduleOnce(function(){t.destroy()},.12)}).start()},e.prototype.checkAngle=function(t){if(this.enemyArr.length>0&&this.enemyArr){var e=t,o=e.x-this.node.x!=0?(e.y-this.node.y-30)/(e.x-this.node.x):0,n=Math.atan(o)*(180/Math.PI);return this.node.x<=e.x?n:n+180}},e.prototype.changeAnimation=function(){var t=this;this.bodySkeleton.setCompleteListener(function(e){"die"==(e.animation?e.animation.name:"")&&(t.node.active=!1,cc.Canvas.instance.node.emit(c.Constant.EVENT.END_GAME,!1))})},e.prototype.update=function(){if(this.moveDir&&this.directionX&&this.isRun&&!this.isDie){var t=this.node.position.add(this.moveDir.mul(this.speed/60));this.node.setPosition(t.clampf(cc.v3(-700,-750),cc.v3(700,750)))}this.enemyArr.length>0&&this.enemyArr&&!this.isDie&&(this.enemyArr[0].x>=this.node.x+20?this.bodySkeleton.node.scaleX=-.1:this.bodySkeleton.node.scaleX=.1)},r([l(sp.Skeleton)],e.prototype,"bodySkeleton",void 0),r([l(cc.CircleCollider)],e.prototype,"bodyCollider",void 0),r([l(cc.CircleCollider)],e.prototype,"rangeCollider",void 0),r([l(cc.Prefab)],e.prototype,"heroBullet",void 0),r([l(cc.Prefab)],e.prototype,"effect",void 0),r([l(cc.Node)],e.prototype,"kameBeam",void 0),r([l(cc.Sprite)],e.prototype,"blood",void 0),r([l(cc.Integer)],e.prototype,"hp",void 0),r([l(cc.Integer)],e.prototype,"damage",void 0),r([l(cc.AudioClip)],e.prototype,"atkSound",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],laser:[function(t,e,o){"use strict";cc._RF.push(e,"6f100s33xhGvpFUCITV0fbf","laser");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.positionXY=function(t){var e=cc.v2(this.node.position.x,this.node.position.y),o=t.getLocation(),n=(o=this.node.parent.parent.convertToNodeSpaceAR(o)).signAngle(e),i=cc.misc.radiansToDegrees(n);i=-1*i+45,this.node.angle=i},e.prototype.onLoad=function(){this.node.parent.parent.on("mousemove",this.positionXY,this)},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],rangeHeroListener:[function(t,e,o){"use strict";cc._RF.push(e,"0bc09FawitI6oRiq1LqEXeV","rangeHeroListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./hero"),a=t("./enemyListener"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){t.node.getComponent(a.default)&&t.node.getComponent(a.default).target&&(this.target.getComponent(c.default).enemyArr.push(t.node.getComponent(a.default).target),this.target.getComponent(c.default).attack()),e.node.getComponent("rangeHeroListener")&&"gem"==t.node.name&&t.node.getComponent("gem").moveToHero()},e.prototype.onCollisionExit=function(t){t.node.getComponent(a.default)&&t.node.getComponent(a.default).target&&this.target.getComponent(c.default).removeEnemy(t.node._id)},r([p(cc.Node)],e.prototype,"target",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./enemyListener":"enemyListener","./hero":"hero"}]},{},["Constant","GamePlay_2","JoyStick","bullet","bulletHeroListener","AdManager","PlatformBrandIcon","effect","enemy","enemyListener","gamePlay","gem","hero","heroListener","kaboom","laser","rangeHeroListener"]);